<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{_layout}">

<head>
    <title th:text="'Product - ' + ${product.name}">Product Detail</title>
</head>

<body>
<div layout:fragment="content">
    <!-- Page Header -->
    <div class="mb-6 px-2">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
            <div>
                <h1 class="text-xl sm:text-2xl font-semibold text-gray-900" th:text="${product.name}">Product Name</h1>
                <p class="mt-1 text-sm text-gray-600">Product details and inventory information</p>
            </div>
            <div class="flex flex-wrap gap-2">
                <a href="/products"
                   class="inline-flex items-center px-3 sm:px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-150">
                    <i class="bi bi-arrow-left mr-2"></i>
                    <span class="hidden sm:inline">Back to Products</span>
                    <span class="sm:hidden">Back</span>
                </a>
                <a th:href="@{/products/{id}/stock(id=${product.productId})}"
                   class="inline-flex items-center px-3 sm:px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-150">
                    <i class="bi bi-box mr-2"></i>
                    <span class="hidden sm:inline">Manage Stock</span>
                    <span class="sm:hidden">Stock</span>
                </a>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mx-2">
        <!-- Product Information Card -->
        <div class="lg:col-span-3">
            <div class="bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden">
                <div class="px-4 sm:px-6 py-4 border-b border-gray-200">
                    <h3 class="text-base sm:text-lg font-medium text-gray-900">Product Information</h3>
                    <p class="mt-1 text-sm text-gray-500">Complete product details and specifications</p>
                </div>
                <div class="px-4 sm:px-6 py-6">
                    <dl class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div class="bg-gray-50 px-4 py-3 rounded-lg">
                            <dt class="text-sm font-medium text-gray-500">Product ID</dt>
                            <dd class="mt-1 text-sm font-semibold text-gray-900" th:text="${product.productId}"></dd>
                        </div>

                        <div class="bg-gray-50 px-4 py-3 rounded-lg">
                            <dt class="text-sm font-medium text-gray-500">Product Name</dt>
                            <dd class="mt-1 text-sm font-semibold text-gray-900" th:text="${product.name}"></dd>
                        </div>

                        <div class="bg-gray-50 px-4 py-3 rounded-lg">
                            <dt class="text-sm font-medium text-gray-500">Brand</dt>
                            <dd class="mt-1 text-sm font-semibold text-gray-900" th:text="${product.brandName}"></dd>
                        </div>

                        <div class="bg-gray-50 px-4 py-3 rounded-lg">
                            <dt class="text-sm font-medium text-gray-500">Category</dt>
                            <dd class="mt-1 text-sm font-semibold text-gray-900">
                                <a th:href="@{/categories/{id}(id=${product.category.id})}"
                                   th:text="${product.category.name}"
                                   class="text-blue-600 hover:text-blue-800 transition-colors duration-150"></a>
                            </dd>
                        </div>

                        <div class="bg-gray-50 px-4 py-3 rounded-lg">
                            <dt class="text-sm font-medium text-gray-500">Supplier</dt>
                            <dd class="mt-1 text-sm font-semibold text-gray-900">
                                <a th:href="@{/suppliers/{id}(id=${product.supplier.id})}"
                                   th:text="${product.supplier.name}"
                                   class="text-blue-600 hover:text-blue-800 transition-colors duration-150"></a>
                            </dd>
                        </div>

                        <div class="bg-gray-50 px-4 py-3 rounded-lg">
                            <dt class="text-sm font-medium text-gray-500">Current Stock</dt>
                            <dd class="mt-1">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
                                      th:classappend="${product.stockQuantity < 10 ? 'bg-red-100 text-red-800' : (product.stockQuantity < 50 ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800')}"
                                      th:text="${product.stockQuantity} + ' units'"></span>
                            </dd>
                        </div>
                    </dl>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="lg:col-span-1 space-y-6">
            <!-- Pricing Card -->
            <div class="bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden">
                <div class="px-4 sm:px-6 py-4 border-b border-gray-200">
                    <h3 class="text-base sm:text-lg font-medium text-gray-900">Pricing</h3>
                </div>
                <div class="px-4 sm:px-6 py-6 text-center">
                    <div class="mb-4">
                        <span class="text-2xl font-bold text-green-600" th:text="'$' + ${#numbers.formatDecimal(product.actualPrice, 1, 2)}">$0.00</span>
                        <p class="text-sm text-gray-600 mt-1">Base Price</p>
                    </div>

                    <div th:if="${product.discount > 0}" class="mb-4 pt-4 border-t border-gray-200">
                        <div class="bg-red-50 rounded-lg p-3">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 mb-2"
                                  th:text="${#numbers.formatDecimal(product.discount, 1, 2)} + '% OFF'"></span>
                            <div class="text-lg font-bold text-red-600" th:text="'$' + ${#numbers.formatDecimal(product.price * (1 - product.discount/100), 1, 2)}">$0.00</div>
                            <p class="text-sm text-gray-600 mt-1">After Discount</p>
                        </div>
                    </div>

                    <div th:unless="${product.discount > 0}" class="text-sm text-gray-500 pt-4 border-t border-gray-200">
                        No discount applied
                    </div>
                </div>
            </div>

            <!-- Quick Actions Card -->
            <div class="bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden">
                <div class="px-4 sm:px-6 py-4 border-b border-gray-200">
                    <h3 class="text-base sm:text-lg font-medium text-gray-900">Quick Actions</h3>
                </div>
                <div class="px-4 sm:px-6 py-6 space-y-3">
                    <a th:href="@{/products/{id}/stock(id=${product.productId})}"
                       class="w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-150">
                        <i class="bi bi-box mr-2"></i> Manage Stock
                    </a>
                    <a th:href="@{/orders/create}"
                       class="w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-150">
                        <i class="bi bi-plus mr-2"></i> Create Order
                    </a>
                    <a th:href="@{/categories/{id}/products(id=${product.category.id})}"
                       class="w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-150">
                        <i class="bi bi-tags mr-2"></i> View Category
                    </a>
                </div>
            </div>

            <!-- Product Avatar Card -->
            <div class="bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden">
                <div class="px-4 sm:px-6 py-6 text-center">
                    <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="bi bi-box text-blue-600 text-3xl"></i>
                    </div>
                    <h3 class="text-lg font-medium text-gray-900" th:text="${product.name}">Product Name</h3>
                    <p class="text-sm text-gray-500" th:text="'ID: ' + ${product.productId}">Product ID</p>
                    <p class="text-sm text-gray-500 mt-1" th:text="${product.brandName}">Brand Name</p>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>